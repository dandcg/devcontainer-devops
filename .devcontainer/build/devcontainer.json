{
    "build": {
        // Path is relative to the devcontainer.json file.
        "dockerfile": "../Dockerfile",
        "context": "..",
        "target": "final", // last stage of your Dockerfile
        "args": {
            "UBUNTU_VERSION": "22.04"
            // Leave versions empty to install latest automatically
            // Or specify versions to pin, e.g.:
            // "TERRAFORM_VERSION": "1.13.5",
            // "KUBECTL_VERSION": "1.34.2",
            // "HELM_VERSION": "4.0.0"
        }
    },
    "remoteUser": "vscode",
    "mounts": [
        "source=${localWorkspaceFolder},target=/workspace/devcontainer,type=bind,consistency=cached"
    ],
    "workspaceMount": "source=dev-volume,target=/workspace,type=volume",
    "workspaceFolder": "/workspace",
    "postCreateCommand": "sudo chown -R vscode:vscode /workspace",
    
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-azuretools.vscode-docker",
                "ms-kubernetes-tools.vscode-kubernetes-tools",
                "hashicorp.terraform",
                "ms-vscode.azurecli",
                "ms-vscode.powershell",
                "redhat.ansible",
                "ms-python.python",
                "ms-python.vscode-pylance",
                "eamodio.gitlens",
                "mhutchie.git-graph",
                "donjayamanne.githistory",
                "GitHub.vscode-pull-request-github",
                "yzhang.markdown-all-in-one",
                "DavidAnson.vscode-markdownlint",
                "esbenp.prettier-vscode",
                "redhat.vscode-yaml",
                "tamasfe.even-better-toml",
                "ms-azuretools.vscode-azureterraform",
                "4ops.terraform",
                "mindaro.mindaro",
                "ms-vscode-remote.remote-containers"
            ],
            "settings": {
                "terminal.integrated.defaultProfile.linux": "bash",
                "terminal.integrated.profiles.linux": {
                    "bash": {
                        "path": "/bin/bash",
                        "icon": "terminal-bash"
                    },
                    "pwsh": {
                        "path": "/usr/local/bin/pwsh",
                        "icon": "terminal-powershell"
                    }
                },
                "files.eol": "\n",
                "editor.formatOnSave": true,
                "editor.formatOnPaste": false,
                "editor.tabSize": 2,
                "editor.insertSpaces": true,
                "terraform.languageServer.enable": true,
                "terraform.codelens.enable": true,
                "ansible.python.interpreterPath": "/usr/bin/python3",
                "[terraform]": {
                    "editor.defaultFormatter": "hashicorp.terraform",
                    "editor.formatOnSave": true
                },
                "[yaml]": {
                    "editor.defaultFormatter": "redhat.vscode-yaml",
                    "editor.formatOnSave": true
                },
                "[json]": {
                    "editor.defaultFormatter": "vscode.json-language-features"
                },
                "[markdown]": {
                    "editor.defaultFormatter": "vscode.markdown-language-features"
                },
                "git.enableSmartCommit": true,
                "git.confirmSync": false,
                "git.autofetch": true,
                "python.defaultInterpreterPath": "/usr/bin/python3",
                "python.linting.enabled": true,
                "python.linting.pylintEnabled": true,
                "python.formatting.provider": "black"
            }
        }
    }
}