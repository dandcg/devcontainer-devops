{
    // Option 1: Use pre-built image from Azure Container Registry
    // Requires: az acr login --name acrukscortshrdcont01
    "image": "acrukscortshrdcont01.azurecr.io/cortisone/devcontainer:latest",
    
    // Option 2: Build from local Dockerfile
    // Uncomment the section below and comment out "image" above to build locally
    // "build": {
    //     "dockerfile": "Dockerfile",
    //     "context": "",
    //     "target": "final",
    //     "args": {
    //         "UBUNTU_VERSION": "22.04"
    //         // Leave versions empty to install latest automatically
    //         // Or specify versions to pin, e.g.:
    //         // "TERRAFORM_VERSION": "1.13.5",
    //         // "KUBECTL_VERSION": "1.34.2",
    //         // "HELM_VERSION": "4.0.0"
    //     }
    // },
    
    "remoteUser": "vscode",
    "runArgs": ["--network=host"],
    "mounts": [
        "source=${localWorkspaceFolder},target=/workspace/devcontainer,type=bind,consistency=cached",
        "type=volume,source=dev-home,target=/home/vscode"
    ],
    "workspaceMount": "source=dev-workspace,target=/workspace,type=volume",
    "workspaceFolder": "/workspace",
    "postCreateCommand": "sudo bash -c 'echo \"127.0.0.1 $(hostname)\" >> /etc/hosts' && sudo chown -R vscode:vscode /workspace && sudo chown -R vscode:vscode /home/vscode",
    "postStartCommand": "sudo /usr/local/bin/entrypoint.sh",
    
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-azuretools.vscode-docker",
                "hashicorp.terraform",
                "ms-vscode.azurecli",
                "ms-vscode.powershell",
                "redhat.ansible",
                "ms-python.python",
                "ms-python.vscode-pylance",
                "eamodio.gitlens",
                "mhutchie.git-graph",
                "donjayamanne.githistory",
                "GitHub.vscode-pull-request-github",
                "yzhang.markdown-all-in-one",
                "DavidAnson.vscode-markdownlint",
                "esbenp.prettier-vscode",
                "redhat.vscode-yaml",
                "tamasfe.even-better-toml",
                "ms-azuretools.vscode-azureterraform",
                "4ops.terraform",
                "mindaro.mindaro",
                "ms-vscode-remote.remote-containers"
            ],
            "settings": {
                "terminal.integrated.defaultProfile.linux": "zsh",
                "terminal.integrated.profiles.linux": {
                    "zsh": {
                        "path": "/bin/zsh",
                        "icon": "terminal-linux"
                    },
                    "bash": {
                        "path": "/bin/bash",
                        "icon": "terminal-bash"
                    },
                    "pwsh": {
                        "path": "/usr/bin/pwsh",
                        "icon": "terminal-powershell"
                    }
                },
                "powershell.integratedConsole.suppressStartupBanner": false,
                "powershell.integratedConsole.startInBackground": false,
                "powershell.promptToUpdatePowerShell": false,
                "files.eol": "\n",
                "editor.formatOnSave": true,
                "editor.formatOnPaste": false,
                "editor.tabSize": 2,
                "editor.insertSpaces": true,
                "terraform.languageServer.enable": true,
                "terraform.codelens.enable": true,
                "ansible.python.interpreterPath": "/usr/bin/python3",
                "[terraform]": {
                    "editor.defaultFormatter": "hashicorp.terraform",
                    "editor.formatOnSave": true
                },
                "[yaml]": {
                    "editor.defaultFormatter": "redhat.vscode-yaml",
                    "editor.formatOnSave": true
                },
                "[json]": {
                    "editor.defaultFormatter": "vscode.json-language-features"
                },
                "[markdown]": {
                    "editor.defaultFormatter": "vscode.markdown-language-features"
                },
                "git.enableSmartCommit": true,
                "git.confirmSync": false,
                "git.autofetch": true,
                "python.defaultInterpreterPath": "/usr/bin/python3",
                "python.linting.enabled": true,
                "python.linting.pylintEnabled": true,
                "python.formatting.provider": "black"
            }
        }
    }
}